{"version":3,"sources":["utils/draw.js","utils/filter.js","static/img/4a5e48e736d12f2ef27d70b84fc2d56284356824.jpg","pages/Home/index.js","App.js","index.js"],"names":["CanvasRect","src","ctx","onload","w","img","width","h","height","naturalWidth","naturalHeight","widthProportion","heightProportion","start","draw","x","drawImage","animation","cancelAnimationFrame","requestAnimationFrame","this","Image","crossOrigin","photoFilter","hdlj","imgData","data","i","length","grey","hblj","avg","fxlj","qslj","Math","floor","min","max","dslj","hjlj","r","g","b","rgbArr","map","e","rzlj","bdlj","lhhlj","abs","adlj","gsmmlj","radius","sigma","handleEdge","m","pixes","gaussEdge","gaussMatrix","gaussSum","a","PI","j","gxy","exp","push","gaussNum","y","mm","currentPixId","jj","ii","pixId","buttonList","text","code","Home","useState","size","setSize","canvasRef","useRef","imgRef","type","setType","useLayoutEffect","current","getContext","frameCanvas","canvas","document","createElement","context","queryImageData","getImageData","change","func","baseImageData","imageData","filterImage","clearRect","putImageData","toDataURL","className","onLoad","ref","alt","id","v","onClick","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ce243b24.chunk.js","sourcesContent":["class CanvasRect {\r\n  constructor(src, ctx) {\r\n    this.x = 0; // x轴坐标\r\n    this.img = new Image();\r\n    this.img.crossOrigin = 'Anonymous';\r\n    this.img.src = src;\r\n    this.w = 0;\r\n    this.h = 0;\r\n    this.naturalWidth = 0;\r\n    this.naturalHeight = 0;\r\n    this.ctx = ctx;\r\n    this.widthProportion = 0;\r\n    this.heightProportion = 0;\r\n    this.img.onload = this.onload;\r\n  }\r\n\r\n  onload = () => {\r\n    this.w = this.img.width;\r\n    this.h = this.img.height;\r\n    this.naturalWidth = this.img.naturalWidth;\r\n    this.naturalHeight = this.img.naturalHeight;\r\n    this.widthProportion = this.naturalWidth / this.w;\r\n    this.heightProportion = this.naturalHeight / this.h;\r\n    this.start();\r\n  };\r\n\r\n  draw = () => {\r\n    this.x += 15;\r\n    this.ctx.drawImage(this.img, this.widthProportion * this.x, 0, 15, this.naturalHeight, this.x, 0, 15, this.h);\r\n  };\r\n\r\n  start = () => {\r\n    this.animation();\r\n  };\r\n\r\n  animation = () => {\r\n    this.draw();\r\n    if (this.x > this.w) {\r\n      cancelAnimationFrame(this.animation);\r\n      return;\r\n    }\r\n    requestAnimationFrame(this.animation);\r\n  };\r\n}\r\n\r\nexport default CanvasRect;\r\n","const photoFilter = {\r\n  // 灰度滤镜\r\n  hdlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (var i = 0; i < data.length; i += 4) {\r\n      var grey = (data[i] + data[i + 1] + data[i + 2]) / 3;\r\n      data[i] = data[i + 1] = data[i + 2] = grey;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 黑白滤镜\r\n  hblj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (var i = 0; i < data.length; i += 4) {\r\n      var avg = (data[i] + data[i + 1] + data[i + 2]) / 3;\r\n      data[i] = data[i + 1] = data[i + 2] = avg >= 125 ? 255 : 0;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 反向滤镜\r\n  fxlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (var i = 0; i < data.length; i += 4) {\r\n      data[i] = 255 - data[i];\r\n      data[i + 1] = 255 - data[i + 1];\r\n      data[i + 2] = 255 - data[i + 2];\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 去色滤镜\r\n  qslj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      let avg = Math.floor((Math.min(data[i], data[i + 1], data[i + 2]) + Math.max(data[i], data[i + 1], data[i + 2])) / 2);\r\n      data[i] = data[i + 1] = data[i + 2] = avg;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 单色滤镜\r\n  dslj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      data[i * 4 + 2] = 0;\r\n      data[i * 4 + 1] = 0;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 怀旧滤镜\r\n  hjlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      let r = data[i * 4],\r\n        g = data[i * 4 + 1],\r\n        b = data[i * 4 + 2];\r\n      let newR = 0.393 * r + 0.769 * g + 0.189 * b;\r\n      let newG = 0.349 * r + 0.686 * g + 0.168 * b;\r\n      let newB = 0.272 * r + 0.534 * g + 0.131 * b;\r\n      let rgbArr = [newR, newG, newB].map((e) => {\r\n        return e < 0 ? 0 : e > 255 ? 255 : e;\r\n      });\r\n      [data[i * 4], data[i * 4 + 1], data[i * 4 + 2]] = rgbArr;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 熔铸滤镜\r\n  rzlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      let r = data[i * 4],\r\n        g = data[i * 4 + 1],\r\n        b = data[i * 4 + 2];\r\n      let newR = (r * 128) / (g + b + 1);\r\n      let newG = (g * 128) / (r + b + 1);\r\n      let newB = (b * 128) / (g + r + 1);\r\n      let rgbArr = [newR, newG, newB].map((e) => {\r\n        return e < 0 ? e * -1 : e > 255 ? 255 : e;\r\n      });\r\n      [data[i * 4], data[i * 4 + 1], data[i * 4 + 2]] = rgbArr;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 冰冻滤镜\r\n  bdlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      let r = data[i * 4],\r\n        g = data[i * 4 + 1],\r\n        b = data[i * 4 + 2];\r\n      let newR = ((r - g - b) * 3) / 2;\r\n      let newG = ((g - r - b) * 3) / 2;\r\n      let newB = ((b - g - r) * 3) / 2;\r\n      let rgbArr = [newR, newG, newB].map((e) => {\r\n        return e < 0 ? e * -1 : e > 255 ? 255 : e;\r\n      });\r\n      [data[i * 4], data[i * 4 + 1], data[i * 4 + 2]] = rgbArr;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 连环画滤镜\r\n  lhhlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      let r = data[i * 4],\r\n        g = data[i * 4 + 1],\r\n        b = data[i * 4 + 2];\r\n      let newR = (Math.abs(g - b + g + r) * r) / 256;\r\n      let newG = (Math.abs(b - g + b + r) * r) / 256;\r\n      let newB = (Math.abs(b - g + b + r) * g) / 256;\r\n      let rgbArr = [newR, newG, newB].map((e) => {\r\n        return e < 0 ? 0 : e > 255 ? 255 : e;\r\n      });\r\n      [data[i * 4], data[i * 4 + 1], data[i * 4 + 2]] = rgbArr;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  // 暗调滤镜\r\n  adlj: function (imgData) {\r\n    let data = imgData.data;\r\n    for (let i = 0; i < data.length; i++) {\r\n      let r = data[i * 4],\r\n        g = data[i * 4 + 1],\r\n        b = data[i * 4 + 2];\r\n      let newR = (r * r) / 255;\r\n      let newG = (g * g) / 255;\r\n      let newB = (b * b) / 255;\r\n      let rgbArr = [newR, newG, newB].map((e) => {\r\n        return e < 0 ? 0 : e > 255 ? 255 : e;\r\n      });\r\n      [data[i * 4], data[i * 4 + 1], data[i * 4 + 2]] = rgbArr;\r\n    }\r\n    return imgData;\r\n  },\r\n\r\n  gsmmlj: function (imgData, radius = 5, sigma = radius / 3) {\r\n    let handleEdge = (i, x, w) => {\r\n      var m = x + i;\r\n      if (m < 0) {\r\n        m = -m;\r\n      } else if (m >= w) {\r\n        m = w + i - x;\r\n      }\r\n      return m;\r\n    };\r\n\r\n    var pixes = imgData.data,\r\n      height = imgData.height,\r\n      width = imgData.width;\r\n    var gaussEdge = radius * 2 + 1;\r\n    var gaussMatrix = [],\r\n      gaussSum = 0,\r\n      a = 1 / (2 * sigma * sigma * Math.PI),\r\n      b = -a * Math.PI;\r\n\r\n    for (var i = -radius; i <= radius; i++) {\r\n      for (var j = -radius; j <= radius; j++) {\r\n        var gxy = a * Math.exp((i * i + j * j) * b);\r\n        gaussMatrix.push(gxy);\r\n        gaussSum += gxy;\r\n      }\r\n    }\r\n    var gaussNum = (radius + 1) * (radius + 1);\r\n    for (let i = 0; i < gaussNum; i++) {\r\n      gaussMatrix[i] /= gaussSum;\r\n    }\r\n\r\n    for (let x = 0; x < width; x++) {\r\n      for (let y = 0; y < height; y++) {\r\n        let r = 0,\r\n          g = 0,\r\n          b = 0;\r\n        for (let i = -radius; i <= radius; i++) {\r\n          let m = handleEdge(i, x, width);\r\n          for (let j = -radius; j <= radius; j++) {\r\n            let mm = handleEdge(j, y, height);\r\n            let currentPixId = (mm * width + m) * 4;\r\n            let jj = j + radius;\r\n            let ii = i + radius;\r\n            r += pixes[currentPixId] * gaussMatrix[jj * gaussEdge + ii];\r\n            g += pixes[currentPixId + 1] * gaussMatrix[jj * gaussEdge + ii];\r\n            b += pixes[currentPixId + 2] * gaussMatrix[jj * gaussEdge + ii];\r\n          }\r\n        }\r\n        let pixId = (y * width + x) * 4;\r\n        pixes[pixId] = ~~r;\r\n        pixes[pixId + 1] = ~~g;\r\n        pixes[pixId + 2] = ~~b;\r\n      }\r\n    }\r\n    return imgData;\r\n  },\r\n};\r\n\r\nexport default photoFilter;\r\n","export default __webpack_public_path__ + \"static/media/4a5e48e736d12f2ef27d70b84fc2d56284356824.82cf06e7.jpg\";","import React, { useState, useLayoutEffect, useRef } from 'react';\r\nimport CanvasRect from '../../utils/draw';\r\nimport photoFilter from '../../utils/filter';\r\n\r\nimport img from '../../static/img/4a5e48e736d12f2ef27d70b84fc2d56284356824.jpg';\r\n\r\nimport './index.less';\r\n\r\nconst buttonList = [\r\n  { text: '正常', code: 'normal' },\r\n  { text: '灰度滤镜', code: 'hdlj' },\r\n  { text: '黑白滤镜', code: 'hblj' },\r\n  { text: '反向滤镜', code: 'fxlj' },\r\n  { text: '去色滤镜', code: 'qslj' },\r\n  { text: '单色滤镜', code: 'dslj' },\r\n  { text: '怀旧滤镜', code: 'hjlj' },\r\n  { text: '熔铸滤镜', code: 'rzlj' },\r\n  { text: '冰冻滤镜', code: 'bdlj' },\r\n  { text: '连环画滤镜', code: 'lhhlj' },\r\n  { text: '暗调滤镜', code: 'adlj' },\r\n  { text: '高斯模糊滤镜', code: 'gsmmlj' },\r\n];\r\n\r\nfunction Home() {\r\n  const [size, setSize] = useState({ width: 0, height: 0 });\r\n  const canvasRef = useRef(null);\r\n  const imgRef = useRef(null);\r\n  const [type, setType] = useState(-1);\r\n\r\n  const imageLoad = () => {\r\n    const width = imgRef.current.width;\r\n    const height = imgRef.current.height;\r\n    setSize({ width, height });\r\n    canvasRef.current.width = width;\r\n    canvasRef.current.height = height;\r\n    queryImageData();\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    const { width, height } = size;\r\n    const ctx = canvasRef.current.getContext('2d');\r\n    ctx.drawImage(imgRef.current, 0, 0, imgRef.current.naturalWidth, imgRef.current.naturalHeight, 0, 0, width, height);\r\n  }, [size]);\r\n\r\n  const frameCanvas = () => {\r\n    const img = imgRef.current;\r\n    const width = img.width;\r\n    const height = img.height;\r\n    const naturalWidth = img.naturalWidth;\r\n    const naturalHeight = img.naturalHeight;\r\n    let canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    let context = canvas.getContext('2d');\r\n    return [canvas, context, width, height, naturalWidth, naturalHeight];\r\n  };\r\n\r\n  const queryImageData = () => {\r\n    const img = imgRef.current;\r\n    const [, context, width, height, naturalWidth, naturalHeight] = frameCanvas();\r\n    context.drawImage(img, 0, 0, naturalWidth, naturalHeight, 0, 0, width, height);\r\n    const imgData = context.getImageData(0, 0, width, height);\r\n    return imgData;\r\n  };\r\n\r\n  const change = async (type) => {\r\n    const { width, height } = size;\r\n    await setType(type);\r\n    const func = photoFilter[type];\r\n    const baseImageData = queryImageData();\r\n    const imageData = func ? func(baseImageData) : baseImageData;\r\n    const img = filterImage(imageData);\r\n    const ctx = canvasRef.current.getContext('2d');\r\n    new CanvasRect(img, ctx);\r\n    ctx.clearRect(0, 0, width, height);\r\n  };\r\n\r\n  const filterImage = (imageData) => {\r\n    const [canvas, context] = frameCanvas();\r\n    context.putImageData(imageData, 0, 0);\r\n    const src = canvas.toDataURL();\r\n    return src;\r\n  };\r\n\r\n  return (\r\n    <div className='home-view'>\r\n      <div className='home-content'>\r\n        <div className='content'>\r\n          <img onLoad={imageLoad} ref={imgRef} src={img} alt='little' />\r\n        </div>\r\n        <div className='content'>\r\n          <canvas ref={canvasRef} id='canvas' />\r\n        </div>\r\n      </div>\r\n      <div className='home-footer'>\r\n        {buttonList.map((v) => {\r\n          return (\r\n            <div key={v.code} onClick={() => change(v.code)} className={`footer-button ${v.code === type ? 'active' : ''}`}>\r\n              {v.text}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import './App.css';\nimport Home from './pages/Home';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n     <Home />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}